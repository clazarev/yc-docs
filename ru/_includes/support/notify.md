# Уведомления от {{ yandex-cloud }}

Техническая поддержка {{ yandex-cloud }} уведомляет вас о событиях, которые касаются всех пользователей {{ yandex-cloud }} или непосредственно вашего аккаунта. Чтобы дополнительно получать уведомления о ваших ресурсах, подпишитесь на **{{ ui-key.yacloud.iam.folder.switch_service-notifications }}** в [облаке](../../resource-manager/operations/cloud/notify.md) или в [каталоге](../../resource-manager/operations/folder/notify.md).

## Типы уведомлений {#notifications}

Получать уведомления можно [по всему облаку](#cloud-notifications) или [по отдельным каталогам](#folder-notifications).

### Уведомления по облаку {#cloud-notifications}

По умолчанию сообщения о технических работах и уведомления от сервисов в облаке получают все его владельцы — пользователи с ролью `{{ roles-cloud-owner }}`. Владельцы организаций (`{{ roles-organization-owner }}`) по умолчанию не получают уведомления по облакам организации, им рекомендуется самостоятельно на них подписаться. Добавить адресатов уведомлений по облаку можно в разделе [Уведомления сервисов]({{ link-cloud-notifications }}).

{% note info %}

Добавлять можно пользователей с [аккаунтом на Яндексе](../../iam/concepts/users/accounts.md#passport) и [федеративных пользователей](../../iam/concepts/users/accounts.md#saml-federation). Федеративные пользователи должны в собственных настройках учетной записи указать адрес электронной почты.

{% endnote %}

Уведомления по облаку содержат следующую информацию:

* идентификатор облака и имя облака;
* идентификатор каталога и имя каталога;
* идентификатор ресурса и имя ресурса.

Уведомления по облаку получают только подписчики облака. Пользователи, подписанные на уведомления каталогов, не получают уведомления по родительскому облаку.

### Уведомления по каталогу {#folder-notifications}

По умолчанию уведомления о ресурсах в каталогах получают подписчики родительского облака, а также владельцы облака (`{{ roles-cloud-owner }}`). Владельцы организаций (`{{ roles-organization-owner }}`) по умолчанию не получают уведомления по каталогам облаков организации, им рекомендуется самостоятельно на них подписаться. Добавить адресатов уведомлений по каталогу можно в [настройках каталога](../../resource-manager/operations/folder/notify.md).

Уведомления по каталогу включают информацию о следующих ресурсах:

* виртуальные машины (идентификатор ВМ);
* виртуальные диски (идентификатор диска);
* кластеры управляемых баз данных MDB (идентификатор кластера).

Уведомления по каталогу получают как подписчики самого каталога, так и подписчики родительского облака. При этом не для всех типов ресурсов возможно определить каталог, поэтому важных получателей рекомендуется подписывать на уведомления по облаку.
  
### Планируемые технические работы {#technical}

Некоторые технические работы по обслуживанию {{ yandex-cloud }} могут повлиять на работоспособность или доступность ваших ресурсов. О таких работах техническая поддержка сообщает за 3 календарных дня электронным письмом, в котором указывается:

* дата и время технических работ;
* категория работ;
* затронутые сервисы {{ yandex-cloud }};
* описание релевантных изменений в сервисах;
* по возможности — советы о том, как уменьшить влияние работ на ваши ресурсы.

### Сбой инфраструктуры {#infra}

Если в работе {{ yandex-cloud }} произошел сбой, который мог повлиять на сохранность или доступность ваших данных, техническая поддержка уведомит вас об этом электронным письмом, как только будут установлены масштаб и последствия проблемы. Уведомления о сбоях получат подписчики каталога, в котором находится затронутый ресурс.

Техническая поддержка не рассылает уведомления об инцидентах платформы. Вы можете проверить доступность сервисов на [странице](https://status.cloud.yandex.ru/dashboard) статуса компонентов платформы или следить за оповещениями в [телеграм-канале](https://t.me/yandexcloudalerts).

### Инцидент информационной безопасности {#security}

Если в инфраструктуре {{ yandex-cloud }} произошло событие, которое привело к компрометации ваших данных, техническая поддержка сообщит об этом электронным письмом в течение 24 часов после того, как ущерб был обнаружен. Адресатами письма будут владелец облака, DPO (data protection officer, ответственный за защиту данных), если эта роль зафиксирована для вашего облака, и пользователи, которых добавили в разделе [Уведомления сервисов]({{ link-cloud-notifications }}).

## Способы получения уведомлений {#notification-settings}

Чтобы настроить способы получения уведомлений:

1. В левом нижнем углу [консоли управления]({{ link-console-main }}) или [{{ support-center-name }}]({{ link-console-support }}) нажмите ![image](../../_assets/console-icons/gear.svg) **Настройки** и перейдите на вкладку **{{ ui-key.yacloud_components.settings.label_title_communications }}**.
1. В блоке **{{ ui-key.yacloud_components.settings.section_transports }}** настройте каналы уведомления.

    Вы можете получать уведомления по электронной почте, в SMS или через Telegram-бота.
1. В блоке **{{ ui-key.yacloud_components.settings.section_settings }}** выберите типы отправляемых уведомлений и каналы получения для каждого типа:
    * ![image](../../_assets/console-icons/at.svg) — письмом на электронную почту;
    * ![image](../../_assets/console-icons/smartphone.svg) — SMS-сообщением;
    * ![image](../../_assets/console-icons/logo-telegram.svg) — сообщением в Telegram-бот;
    * ![image](../../_assets/console-icons/handset.svg) — прозвоном на указанный номер телефона (работает только для эскалаций сервиса {{ monitoring-name }});
    * ![image](../../_assets/console-icons/antenna-signal.svg) — отправкой сообщений на заданные URL-адреса.

## Вебхуки {#webhook}

Вы можете настроить автоматическую отправку сообщений на заданные URL-адреса при возникновении определенных событий в ваших облачных сервисах. В настоящий момент поддержаны вебхуки для событий типа **{{ ui-key.yacloud_components.settings.label_tech-name }}** и **{{ ui-key.yacloud_components.settings.label_monitoring-name }}**. Обработчиками сообщений могут быть ваши On-premise мессенджеры, такие как Rocket.Chat, Mattermost, Jabber и Slack. Интеграция вебхуков поможет настроить систему уведомлений под действующие бизнес-процессы и более гибко интегрировать вашу инфраструктуру в {{ yandex-cloud }} с уже существующими системами мониторинга и управления.

Чтобы настроить вебхуки:

1. Настройте вебхук в мессенджере. Для настройки в Mattermost следуйте [инструкции](https://developers.mattermost.com/integrate/webhooks/incoming/) и укажите имя вебхука, канал отправки сообщений и `yc-notify_bot` в качестве пользователя для отправки сообщений {{ yandex-cloud }}.
1. Скопируйте URL созданного вебхука. Его формат имеет вид `https://<сервер_mattermost.com>/hooks/<сгенерированный_ключ>`.
1. Перейдите в [консоль управления]({{ link-console-main }}) или [{{ support-center-name }}]({{ link-console-support }}). В левом нижнем углу нажмите ![image](../../_assets/console-icons/gear.svg) **Настройки** и перейдите на вкладку **{{ ui-key.yacloud_components.settings.label_title_communications }}**.
1. В блоке **{{ ui-key.yacloud_components.settings.section_transports }}** в секции **{{ ui-key.yacloud_components.settings.label_add-empty-webhookOutgoing }}** нажмите **{{ ui-key.yacloud_components.settings.button_add-empty }}**.
1. В открывшемся окне укажите имя и URL вебхука, настроенные в мессенджере, и нажмите **{{ ui-key.yacloud_components.settings.button_send-code }}**.
1. После нажатия кнопки в канал мессенджера, указанный при настройке вебхука, должен прийти код подтверждения. Выделите его и скопируйте в буфер обмена.
1. Вставьте код подтверждения из буфера обмена в поле в окне подтверждения в [консоли управления]({{ link-console-main }}) или [{{ support-center-name }}]({{ link-console-support }}). 
После подтверждения URL и указанное имя вебхука отобразятся в секции **{{ ui-key.yacloud_components.settings.section_transports }}**.

Вебхук настроен. Теперь уведомления о технических работах и других типах работ в {{ yandex-cloud }} будут приходить в указанный канал вашей инсталляции мессенджера и иметь следующий вид:

```json
{
	"title": "<заголовок>",
	"text": "<текст_уведомления>"
	"props": {
		"event": "maintenance",
		...
	}
}
```