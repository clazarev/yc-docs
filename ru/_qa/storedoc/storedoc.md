#### Почему стоит использовать {{ SD }} в {{ mmg-short-name }}, а не собственную установку на виртуальной машине? {#storedoc-advantages-vm}

{{ mmg-short-name }} автоматизирует рутинное обслуживание БД:

- быстрое развертывание БД с необходимыми доступными ресурсами;
- резервное копирование данных;
- регулярное обновление ПО;
- обеспечение отказоустойчивости кластеров БД;
- мониторинг и статистика использования БД.


#### Что случится с кластером, если выйдет из строя один из хостов? {#node-out}

Если в кластере БД больше 1 реплики, при потере одного хоста кластер продолжит работу.

Данные могут потеряться только если вышел из строя единственный хост в кластере.


#### Можно ли развернуть кластер {{ SD }} в нескольких зонах доступности? {#multiple-az}

Да. Кластер БД может состоять из хостов, расположенных как в разных зонах, так и в разных регионах доступности.


#### Как проводится резервное копирование для кластеров {{ SD }}? {#backup}

Резервные копии создаются каждые 24 часа и хранятся 7 дней после создания. Восстановить данные можно только на момент создания копии.


#### Как устроена репликация для {{ SD }}? {#replication}

{{ mmg-short-name }} использует стандартный механизм репликации {{ SD }}: если в кластере есть больше 1 активного хоста, среди них автоматически выбирается первичный сервер, обрабатывающий запросы на запись.

Подробнее о том, как организована репликация в {{ SD }}, читайте в [документации СУБД](https://docs.mongodb.com/manual/replication/).


#### Какие ограничения накладываются на кластеры БД {{ SD }}? {#cluster-limitations}

Подробнее об ограничениях в {{ mmg-name }} см. в разделе [Квоты и лимиты](../../storedoc/concepts/limits.md).

#### Почему кластер работает медленно, хотя вычислительные ресурсы использованы не до предела? {#throttling}

{% include [throttling](../throttling.md) %}

Чтобы увеличить максимальные значения IOPS и bandwidth и снизить вероятность троттлинга, расширьте размер хранилища при [изменении кластера](../../storedoc/operations/update.md#change-disk-size).

Если вы используете хранилище с типом диска `network-hdd`, рассмотрите возможность перехода на `network-ssd` или `network-ssd-nonreplicated` путем [восстановления кластера](../../storedoc/operations/cluster-backups.md#restore) из резервной копии.

#### Как получить доступ к служебной коллекции local.oplog.rs? {#oplog-permission}

Чтобы предоставить пользователю доступ к чтению `oplog`, выдайте ему роль `mdbReplication` в БД `admin`. Для этого выполните команду в интерфейсе командной строки {{ yandex-cloud }}:

```bash
{{ yc-mdb-mg }} user update <имя_пользователя> \
  --cluster-name <имя_кластера> \
  --permission database=admin,role=mdbReplication,role=<другая_роль>,... \
  --permission database=<имя_другой_БД>,role=<роль>,...
```

Чтобы избежать удаления уже назначенных ролей пользователя, в команде перечислите как существующие, так и добавляемые роли.

#### Можно ли подключиться к хостам кластера по SSH или получить на хостах права суперпользователя? {#connect-ssh}

{% include [connect-via-ssh](../../_includes/mdb/connect-via-ssh.md) %}

#### Что делать, если при получении SSL-сертификата через PowerShell возникает ошибка проверки отзыва? {#get-ssl-error}

Полный текст ошибки:

```text
curl: (35) schannel: next InitializeSecurityContext failed: Unknown error (0x80092012)
The revocation function was unable to check revocation for the certificate
```
Это означает, что при подключении к веб-сайту не удалось проверить, есть ли его сертификат в списке отозванных.

Чтобы исправить ошибку:

* убедитесь, что проверку не блокируют настройки корпоративной сети;
* выполните команду с параметром `--ssl-no-revoke`.

  ```powershell
   mkdir $HOME\.mongodb; curl.exe --ssl-no-revoke -o $HOME\.mongodb\root.crt {{ crt-web-path }}
   ```