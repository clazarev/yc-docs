---
title: Поисковые индексы {{ vector-store-name }} в {{ foundation-models-full-name }}
description: В данном разделе вы узнаете о поисковых индексах {{ vector-store-name }}, с помощью которых вы можете реализовывать векторный поиск по базам знаний в AI-агентах {{ foundation-models-full-name }}.
---

# Поисковые индексы {{ vector-store-name }}

[AI-агенты](../agents/index.md) в своей работе могут использовать семантический поиск по контексту, получаемому из файлов внешних баз знаний. Такой дополнительный контекст хранится в _поисковых индексах_ {{ vector-store-name }} — специальных векторных хранилищах {{ foundation-models-full-name }}, которые создаются с помощью {{ vector-store-name }} API и в которых документы представлены в виде векторов ([эмбеддингов](../embeddings.md)).

## Создание индекса {#creating-index}

Чтобы создать поисковый индекс, необходимо загрузить в {{ vector-store-name }} файлы-источники для базы знаний и проиндексировать их.

### Загрузка файлов-источников {#file-uploading}

В {{ vector-store-name }} вы можете [загрузить](../../operations/agents/manage-searchindex.md#upload-files) до 10 000 файлов, максимальный размер каждого файла — 128 МБ. Один и тот же файл может использоваться для создания одновременно нескольких поисковых индексов {{ vector-store-name }}.

{% include [searchindex-filetypes](../../../_includes/ai-studio/searchindex-filetypes.md) %}

### Индексирование загруженных файлов {#file-indexing}

При [создании](../../operations/agents/manage-searchindex.md#create-index) поисковых индексов {{ vector-store-name }} загруженные файлы автоматически разбиваются на фрагменты, которые затем преобразуются моделью эмбеддингов в числовые векторы. Вектор отражает смысл фрагмента, благодаря чему нужную информацию можно находить в индексе не только по совпадению слов, но и по совпадению смыслов/значений.

При разбиении информации на фрагменты не учитывается смысл, поэтому текст может быть разделен, например, в середине предложения. В этом случае контекст оказывается неполным. Чтобы сократить потери информации, возникающие из-за подобного разрыва контекста, при разбиении данных на фрагменты используют _перекрытие_, которое позволяет сохранить часть информации одновременно в двух соседних фрагментах.

По умолчанию при создании поисковых индексов {{ vector-store-name }} используются стандартные [модели эмбеддингов](../embeddings.md#yandexgpt-embeddings) {{ foundation-models-name }}. Чтобы улучшить качество векторного поиска в зависимости от специфики входных файлов, вы можете использовать [дообученные модели эмбеддингов](../../operations/tuning/create-embeddings.md).

После завершения обработки всех файлов и векторизации всех полученных текстовых фрагментов поисковый индекс готов к использованию.

Возможные состояния процесса создания поискового индекса {{ vector-store-name }}:

* `in_progress` — происходит фрагментирование загруженных файлов и векторизация фрагментов;
* `completed` — поисковый индекс готов к работе;
* `failed` — при создании поискового индекса возникла ошибка.

## Использование поискового индекса {#using-index}

Использование поисковых индексов позволяет реализовать сценарий генеративного ответа с учетом информации из внешних источников ([RAG](https://ru.wikipedia.org/wiki/Генерация,_дополненная_поиском), Retrieval Augmented Generation), при котором [модель генерации текста](../generation/models.md) будет готовить ответ с учетом найденной в поисковом индексе информации.

Поисковый индекс {{ vector-store-name }} можно подключить к [AI-агенту](../agents/index.md) при помощи инструмента {{ retrieval-tool-name }} с использованием {{ responses-api }} или [{{ realtime-api }}](../agents/realtime.md#realtime-api). 

Результатом [поиска](../../operations/agents/manage-searchindex.md#search-index) по векторному индексу {{ vector-store-name }} являются:
* Список релевантных текстовых фрагментов.

    Поиск в индексе {{ vector-store-name }} ([similarity search](https://en.wikipedia.org/wiki/Similarity_search)) возвращает список из заданного количества ближайших по смыслу векторов (метод `Top-k`). 
* Оценка релевантности по отношению к запросу для каждого из возвращаемых фрагментов списка.
* Метаданные фрагментов.

    К результатам поиска можно применять фильтры по _метаданным_ — дополнительным атрибутам поисковых индексов {{ vector-store-name }}, которые задаются при их создании. Метаданные поисковых индексов представляют собой объекты, содержащие пары `<ключ>:<значение>`, и могут расширять контекст поиска дополнительными сведениями, такими как категория данных, дата обновления, специальные метки и т.п.

## Управление поисковым индексом {#managing-index}

Вы можете добавлять новые файлы к существующим поисковым индексам {{ vector-store-name }}, а также [удалять](../../operations/agents/manage-searchindex.md#remove-file) из них имеющиеся файлы. 

{{ vector-store-name }} API позволяет настраивать автоматическое удаление неиспользуемых поисковых индексов. Для этого в поле `expires_after` задайте значение для одного из свойств:
* `created_at` — заданное значение определяет срок жизни поискового индекса с момента создания;
* `last_active_at` — заданное значение определяет срок жизни поискового индекса с момента последнего использования.

По истечении указанного в поле `expires_after` времени поисковый индекс будет автоматически удален. Кроме того, вы можете в любой момент [удалить](../../operations/agents/manage-searchindex.md#delete-index) поисковый индекс {{ vector-store-name }} вручную.

## Возможные сценарии использования поисковых индексов {{ vector-store-name }} {#use-cases}

В сочетании с AI-агентами поисковые индексы {{ vector-store-name }} могут использоваться в целом ряде сценариев:

* **AI-бот для клиентов, отвечающий на часто задаваемые вопросы**

    * В поисковый индекс {{ vector-store-name }} загружается база инструкций и ответов на часто задаваемые вопросы.
    * Поисковый индекс подключается к AI-агенту.
    * Пользователь задает вопрос: `Сколько багажа можно взять с собой?`
    * Поиск находит релевантный фрагмент в базе знаний: `Одна сумка до 23 кг`.
    * AI-агент возвращает ответ со ссылкой на документ.

* **Внутренняя база знаний компании**

    * В поисковый индекс {{ vector-store-name }} загружаются регламенты, политики, инструкции по продукту.
    * Запрос к поисковому индексу возвращает ответы по смыслу, даже если непосредственные формулировки не совпадают.

        Например: на ключевое слово `увольнение` система найдет в том числе документы с формулировками `прекращение трудовых отношений` или `расторжение трудового договора`.

* **AI-ассистент техподдержки (Call Center Assistant)**

    * В поисковый индекс {{ vector-store-name }} загружается база инструкций и ответов на часто задаваемые вопросы.
    * Оператор во время звонка набирает или произносит запрос: `Как сбросить пароль пользователя?`
    * AI-агент с подключенным поисковым индексом мгновенно подсказывает шаги из базы знаний.

* **Анализ объемных документов**

    * В поисковый индекс {{ vector-store-name }} загружаются отчеты, исследования, контракты.
    * Запрос к поисковому индексу позволяет быстро найти нужные фрагменты: `Покажи все упоминания про KPI за 2024 год`.
    
        Особенно эффективно при работе с сотнями страниц информации.

* **Чат с AI-агентом по корпоративным документам**

    * AI-агент подключается к поисковому индексу {{ vector-store-name }}, содержащему корпоративную базу знаний.
    * Сотрудник задает AI-агенту вопрос: `Объясни, как работает процесс возврата товара`.
    * AI-агент получает релевантные фрагменты документации и на их основе дает подробный и корректный ответ.

* **Локальный поиск для приложений**

    * Корпоративное приложение (например, [CRM](https://ru.wikipedia.org/wiki/Система_управления_взаимоотношениями_с_клиентами) или [Wiki](https://ru.wikipedia.org/wiki/Вики)) использует поисковый индекс {{ vector-store-name }} для поиска по внутреннему контенту.
    * Пользователь задает вопрос в свободной форме и находит подходящие записи даже без точного совпадения слов.

* **Многоязычный поиск**

    * В одном и том же поисковом индексе {{ vector-store-name }} хранятся документы на русском и английском языках.
    * При запросе `baggage allowance` индекс вернет фрагменты в том числе и на русском языке по запросу `нормы провоза багажа`.

* **Интеграция с аналитикой**

    * В поисковый индекс {{ vector-store-name }} загружаются [транскрипты звонков](../../../speechkit/stt/index.md) или чатов.
    * {{ vector-store-name }} API позволяет находить похожие обращения клиентов.
    * Полученную информацию можно быстро группировать, анализировать, находить наиболее часто возникающие вопросы и выявлять проблемы.

Таким образом, поисковые индексы {{ vector-store-name }} — это универсальный инструмент, который может использоваться как чат-ботами, так и пользователями для внутреннего поиска, анализа документов, а также для интеграции в бизнес-процессы компаний (клиентская поддержка, аналитика, обучение сотрудников и т.п.)

#### См. также {#see-also}

* [{#T}](../assistant/files.md)
* [{#T}](../../operations/agents/manage-searchindex.md)
* [{#T}](../../operations/assistant/create-with-searchindex.md)