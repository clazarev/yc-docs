# Требования к инфраструктуре для работы {{ speechsense-hybrid-name }}

Чтобы развернуть модуль {{ speechsense-hybrid-name }}, необходимо подготовить инфраструктуру. Потребуется кластер {{ k8s }} с поддержкой GPU, развернутые базы данных {{ PG }}, {{ CH }}, {{ OS }}, а также объектное хранилище, совместимое с AWS API или {{ objstorage-full-name }} API. 

| Компонент инфраструктуры | Назначение | Целевой компонент |
|---|---|---|
| {{ PG }} | Хранение метаданных сервисов | Model Service, Queue Agent, Tuning Service, Dataset Service |
| Объектное хранилище S3 | Хранение данных моделей. API объектного хранилища должен быть совместим с {{ objstorage-full-name }} API | Model Service, Queue Agent, Tuning Service, Dataset Service |
| (Опционально) {{ KF }} |	Работа с очередями. По умолчанию данные записываются агентом очередей в {{ PG }} и асинхронно обрабатываются компонентами Inference | Inference Backend |
| {{ k8s }} | Инфраструктурный слой работы {{ speechsense-hybrid-name }} | |
| {{ CH }} | Обеспечение работы отчетности, хранение эмбеддингов для смыслового поиска и смысловых тегов | {{ speechsense-hybrid-name }} |
| {{ OS }} | Хранение и индексация текстов диалогов и метаданных. Полнотекстовый поиск и фильтрация. | {{ speechsense-hybrid-name }} |

Для всех баз данных необходим режим кластеризации. Для {{ PG }} предпочтителен режим физической репликации с возможностью читать данные из реплики. Для {{ KF }} необходимы стандартные для этой базы режимы кластеризации и кворума.

Кластер {{ k8s }} должен поддерживать Persistent volume claim с объектным хранилищем (S3 Storage). То есть требуется [драйвер CSI](https://github.com/yandex-cloud/k8s-csi-s3) (Container Storage Interface) для доступа к S3 API. Узлы группы {{ k8s }} должны иметь GPU и набор LTS-драйверов NVIDIA®.

