---
title: Типы дисков в {{ mmy-full-name }}
description: Из статьи вы узнаете, какие типы дисков есть в {{ mmy-name }} и познакомитесь с особенностями выбора типа дисков при создании кластера.
---

# Хранилище в {{ mmy-name }}



{{ mmy-name }} позволяет использовать сетевые и локальные диски для организации хранилища кластеров баз данных. Сетевые диски реализованы на базе сетевых блоков — виртуальных дисков в инфраструктуре {{ yandex-cloud }}. Локальные диски физически размещаются в серверах хостов БД.

{% include [storage-type](../../_includes/mdb/mmy/storage-type.md) %}

## Выбор типа дисков при создании кластера {#storage-type-selection}

Количество хостов, которые можно создать вместе с кластером {{ MY }}, зависит от выбранного типа диска:

* Вы можете создать кластер только из трех или более хостов при использовании следующих типов дисков:

    * локальные SSD-диски (`local-ssd`);
    * нереплицируемые SSD-диски (`network-ssd-nonreplicated`).

   Такой кластер будет [высокодоступным](high-availability.md).

   Хранилище на локальных SSD-дисках влияет на тарификацию кластера: он тарифицируется, даже если остановлен. Подробнее в [правилах тарификации](../pricing.md).

* Вы можете добавить любое количество хостов в пределах [текущей квоты](./limits.md) при использовании следующих типов дисков:

    * сетевые HDD-диски (`network-hdd`);
    * сетевые SSD-диски (`network-ssd`);
    * сверхбыстрые сетевые SSD-диски с тремя репликами (`network-ssd-io-m3`).

Подробнее об ограничениях на количество хостов в кластере см. в разделе [Квоты и лимиты](./limits.md).



## Шифрование диска {#disk-encryption}

{% include [disk-encryption](../../_includes/mdb/disk-encryption.md) %}


## Управление дисковым пространством {#manage-storage-space}

При заполнении хранилища более чем на 95% хост автоматически переходит в режим read-only. При этом на хосте-мастере устанавливается системная переменная `read_only = 1`.

В этом режиме запросы на вставку (`INSERT`), удаление (`DELETE`) и обновление (`UPDATE`) данных завершаются ошибкой.

Чтобы вывести кластер {{ mmy-name }} из режима read-only, [увеличьте размер хранилища](../operations/update.md#change-disk-size).


Для отслеживания степени заполнения хранилища [настройте алерты в {{ monitoring-full-name }}](../operations/monitoring.md#monitoring-integration).


### Автоматическое увеличение размера хранилища {#disk-size-autoscaling}

Автоматическое увеличение размера хранилища позволяет избежать ситуаций, когда свободное место на диске заканчивается и хосты переходят в режим read-only. Хранилище увеличивается, когда достигнут установленный порог срабатывания — процент от общего объема хранилища. Есть два порога:

* Порог для планового увеличения. Такое увеличение планируется по прогнозу алгоритма, который анализирует данные за последние несколько часов и оценивает, как быстро заполняется хранилище. Если расчеты показывают, что к началу ближайшего [окна обслуживания](maintenance.md#maintenance-window) заданный порог будет превышен, то планируется увеличение. Если проверка в начале обслуживания показывает, что заданный порог действительно превышен, объем хранилища увеличивается.

* Порог для незамедлительного увеличения. Когда он достигнут, объем хранилища увеличивается немедленно.

Можно использовать один или оба порога. Если заданы оба порога, то порог для незамедлительного увеличения должен быть больше, чем для планового.

{% include [storage-resize-steps](../../_includes/mdb/mmy/storage-resize-steps.md) %}

Настроить автоматическое увеличение размера хранилища можно при [создании](../operations/cluster-create.md) или [изменении кластера](../operations/update.md). Если настроен порог для планового увеличения, настройте расписание [окна обслуживания](maintenance.md#maintenance-window).

{% note warning %}

* Автоматическое увеличение размера хранилища не поддерживается на выделенных хостах.

* Во время изменения размера хранилища хосты кластера будут недоступны.

* Размер хранилища нельзя уменьшить.

{% endnote %}


## Примеры использования {#examples}

* [{#T}](../tutorials/sync-mysql.md)
* [{#T}](../tutorials/bitrix-shop/index.md)
* [{#T}](../tutorials/bitrix-website/index.md)
* [{#T}](../tutorials/opencart/index.md)

