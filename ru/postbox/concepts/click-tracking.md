---
title: Отслеживание переходов по ссылкам
description: В {{ postbox-full-name }} можно отслеживать переходы по ссылкам в письмах. Когда получатель переходит по ссылке в письме, {{ postbox-name }} отправляет уведомление о том, что был совершен переход.
---

# Отслеживание переходов по ссылкам

{{ postbox-full-name }} позволяет отслеживать переходы по ссылкам в письмах. Когда получатель нажимает на ссылку в письме, {{ postbox-name }} отправляет [уведомление](notification.md#click) о том, что был совершен переход.

## Принцип работы {#how-it-works}

Для отслеживания переходов по ссылкам {{ postbox-name }} использует технологию перенаправления ссылок. При включенном отслеживании сервис автоматически заменяет все ссылки в HTML-части письма на отслеживающие ссылки, которые ведут через промежуточный сервер {{ postbox-name }}.

Когда получатель нажимает на ссылку в письме, браузер сначала обращается к серверу {{ postbox-name }}, который регистрирует переход и отправляет уведомление, а затем перенаправляет пользователя на оригинальный адрес.

Описание формата уведомлений о переходах по ссылкам см. в разделе [{#T}](notification.md#click).

{% note warning %}

{{ postbox-name }} модифицирует тело письма, заменяя оригинальные ссылки на отслеживающие. Протокол в отслеживающей ссылке совпадает с протоколом оригинальной ссылки (например, `http://` или `https://`).

{% endnote %}

## Настройка отслеживания {#setup}

Чтобы получать уведомления о переходах по ссылкам, [создайте конфигурацию](../operations/create-configuration.md), указав в ней тип уведомления **Переход по ссылке**.

{% note info %}

Отслеживание работает для писем, у которых только один получатель.

Отслеживающие ссылки добавляются только в письма, которые содержат HTML-часть. Если письмо содержит только текстовую часть, отслеживание недоступно.

{% endnote %}

## Особенности работы {#features}

### Множественные переходы {#multiple-clicks}

{{ postbox-name }} отправляет уведомление каждый раз, когда получатель переходит по ссылке. Если получатель нажал на одну и ту же ссылку несколько раз, вы получите соответствующее количество уведомлений.

### Поддерживаемые протоколы {#protocols}

Отслеживание поддерживается для ссылок с протоколами:

* `http://`
* `https://`

Ссылки с другими протоколами (например, `mailto:`, `tel:`, `ftp://`) не отслеживаются и остаются без изменений.

Для ссылок без протокола (например, `www.example.com`) {{ postbox-name }} добавляет протокол `http://` по умолчанию.

### Обработка ошибок {#error-handling}

Если оригинальная ссылка недоступна или возвращает ошибку, {{ postbox-name }} все равно отправит уведомление о переходе, а пользователь получит соответствующую ошибку в браузере.

### Теги ссылок {#link-tags}

Вы можете добавить теги в виде пар ключ-значение к ссылкам в письме, используя атрибут `postbox:tags`. При использовании этого атрибута указывайте ключи в формате `<ключ>:<значение>`. Если нужно передать несколько пар ключ-значение, разделяйте каждую пару точкой с запятой `;`.

Например, при добавлении тегов `product:book`, `genre:fiction`, `subgenre:scifi`, `type:newrelease` результирующая ссылка будет выглядеть следующим образом:

```html
<a postbox:tags="product:book;genre:fiction;subgenre:scifi;type:newrelease;"
   href="http://www.example.com/…/">Новинки научной фантастики</a>
```

Теги передаются в уведомления о переходах, что позволяет проводить дополнительный анализ конкретных ссылок, по которым переходили пользователи. Вы можете использовать теги, чтобы отличать переходы по одинаковым ссылкам в разных частях письма. При замене оригинальных ссылок на отслеживающие теги удаляются и в письме не видны.
