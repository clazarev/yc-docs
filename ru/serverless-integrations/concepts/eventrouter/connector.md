---
title: Коннектор {{ er-full-name }}
description: Коннектор {{ er-name }} — настраиваемый компонент, позволяющий получать события из внешних источников.
keywords:
  - eventrouter
  - event router
  - шина
  - коннектор
  - Источник
  - Источник событий
  - Event Source
---

# Коннектор

_Коннектор_ — настраиваемый компонент, позволяющий получать события из внешних источников и отправлять их в [шину](bus.md).

Поддерживаемые источники:

* [Таймер](#timer)
* [API {{ er-name }}](#from-api)
* [{{ yds-full-name }}](../../../data-streams/index.yaml)
* [{{ message-queue-full-name }}](../../../message-queue/index.yaml)


## Таймер {#timer}

Таймер — тип источника, который запускает генерацию событий по расписанию. Расписание задается в формате [cron-выражения](#cron-expression). По умолчанию время в cron-выражении указывается по [UTC+0](https://ru.wikipedia.org/wiki/Всемирное_координированное_время), но в настройках таймера можно указать другой часовой пояс.

Если в настройках таймера не указаны данные, которые нужно передать в шину, на вход [приемника](./rule.md#target), указанного в [правиле](./rule.md), ничего не передается.

### Формат cron-выражения {#cron-expression}

Порядок полей в cron-выражении: `Seconds Minutes Hours Day-of-month Month Day-of-week`.

### Возможные значения полей {#field-and-value}

{% note info %}

Служебные символы, а также имена месяцев и дней недели не чувствительны к регистру: `MON` эквивалентно `mon`.

{% endnote %}

Название <br>поля | Обязательное <br>поле | Допустимые <br>значения | Поддержка <br>специальных <br>символов
--- | --- | --- | ---
`Seconds` (секунды) | Да | 0-59 | `,`, `-`, `*`, `/`
`Minutes` (минуты) | Да | 0-59 | `,`, `-`, `*`, `/`
`Hours` (часы) | Да| 0-23 | `,`, `-`, `*`, `/`
`Day of month` (день месяца)| Да | 1-31 | `,`, `-`, `*`, `?`, `/`, `L`, `W`
`Month` (месяц)| Да | 1-12, <br>JAN-DEC | `,`, `-`, `*`, `/`
`Day of week` (день недели)| Да | 1-7, <br>MON-SUN | `,`, `-`, `*`, `?`, `/`, `L`, `#`

### Специальные символы {#special-characters}

Для cron-выражения доступны следующие специальные символы:

* `*` — выбор всех значений в поле.

    > Символ `*` в поле `Minutes`: таймер запускается `каждую минуту`.

* `?` — выбор любого значения поля. Поля `Day of month` и `Day of week` не могут быть заполнены одновременно. Если вы указали значение в одном из этих полей, укажите символ `?` в другом.

    > Значение `10` в поле `Day of month` и символ `?` в поле `Day of week`: таймер запускается каждый десятый день месяца.

* `-` — выбор диапазона значений.

    > Диапазон `10-12` в поле `Hours`: таймер запускается в 10, 11 и 12 часов.

* `,` — выбор нескольких значений.

    > Значения `MON,WED,FRI` в поле `Day of week`: таймер запускается в понедельник (Monday), среду (Wednesday) и пятницу (Friday).

* `/` — инкрементальное увеличение значения.

    > Значения `0/15` в поле `Minutes`: таймер запускается в 0, 15, 30 и 45 минут.

* `L` — символ имеет разные значения для двух полей, в которых разрешен:

    * Для поля `Day of month` значит последний день месяца.
    * Для поля `Day of week` значит последний день недели, то есть `7` (воскресенье, `SUN`).

    > Значение `L` в поле `Day of month`: таймер запускается 31 числа для января, 28 числа для февраля и т. д.

* `W` — выбор ближайшего буднего дня к указанной дате.

    > Значение `15W` в поле `Day of month`: таймер запускается в ближайший будний день к 15 числу месяца. Если 15 число это суббота, таймер будет запускаться 14 числа в пятницу.

    {% note info %}

    Символы `L` и `W` в поле `Day of month` также объединяются в сочетание `LW`: таймер запускается в последний будний день месяца.

    {% endnote %}

* `#` — выбор N-ного дня месяца.

    > Значение `6#3` в поле `Day of week`: таймер запускается в третью пятницу месяца (6 — пятница, 3 — третья пятница месяца).

### Примеры cron-выражений {#examples}

Cron-выражение | Описание
--- | ---
`*/5 * * * * ?` | Таймер запускается каждые 5 секунд.
`0 * * * * ?` | Таймер запускается каждую минуту.
`0 0 * ? * *`| Таймер запускается каждый час.
`0 15 10 ? * *` | Таймер запускается каждый день в 10:15.


## API {{ er-name }} {#from-api}

API {{ er-name }} — тип источника, который позволяет использовать [API {{ er-name }}](../../api-ref/eventrouter/authentication.md) для [отправки](./sending-events.md) пользовательских событий в шину.

Чтобы отправлять события [через коннектор](../../operations/eventrouter/bus/data-send.md) для API {{ er-name }}, используйте [вызов](../../../serverless-integrations/eventrouter/api-ref/grpc/Event/send.md) gRPC API `EventService/Send` или [команду](../../../cli/cli-ref/serverless/cli-ref/eventrouter/send-event.md) {{ yandex-cloud }} CLI `yc serverless eventrouter send-event`.

В отличие от отправки сообщений [напрямую в шину](../../operations/eventrouter/bus/data-put.md), использование коннектора для API {{ er-name }} позволяет:
* назначать пользователям и [сервисным аккаунтам](../../../iam/concepts/users/service-accounts.md) роли на отправку событий гранулярно через заданный коннектор;
* прекращать отправку событий, [останавливая](../../operations/eventrouter/connector/stop.md) коннектор;
* группировать события перед отправкой в шину.
