---
subcategory: Managed Service for Elasticsearch
page_title: 'Yandex: yandex_mdb_elasticsearch_cluster'
description: Manages a Elasticsearch cluster within Yandex Cloud.
---

# yandex_mdb_elasticsearch_cluster (Resource)

Manages a Elasticsearch cluster within the Yandex Cloud. For more information, see [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/concepts).

## Example usage

```terraform
//
// Create a new MDB ElasticSearch Cluster.
//
resource "yandex_mdb_elasticsearch_cluster" "my_cluster" {
  name        = "test"
  environment = "PRESTABLE"
  network_id  = yandex_vpc_network.foo.id

  config {

    admin_password = "super-password"

    data_node {
      resources {
        resource_preset_id = "s2.micro"
        disk_type_id       = "network-ssd"
        disk_size          = 100
      }
    }

  }

  host {
    name             = "node"
    zone             = "ru-central1-a"
    type             = "DATA_NODE"
    assign_public_ip = true
    subnet_id        = yandex_vpc_subnet.foo.id
  }

  maintenance_window {
    type = "ANYTIME"
  }
}

resource "yandex_vpc_network" "foo" {}

resource "yandex_vpc_subnet" "foo" {
  zone           = "ru-central1-a"
  network_id     = yandex_vpc_network.foo.id
  v4_cidr_blocks = ["10.5.0.0/24"]
}
```

```terraform
//
// Create a new MDB ElasticSearch Cluster.
//

locals {
  zones = ["ru-central1-a", "ru-central1-b", "ru-central1-d"]
}

resource "yandex_mdb_elasticsearch_cluster" "my_cluster" {
  name        = "my-cluster"
  environment = "PRODUCTION"
  network_id  = yandex_vpc_network.es-net.id

  config {
    edition        = "platinum"
    admin_password = "super-password"

    data_node {
      resources {
        resource_preset_id = "s2.micro"
        disk_type_id       = "network-ssd"
        disk_size          = 100
      }
    }

    master_node {
      resources {
        resource_preset_id = "s2.micro"
        disk_type_id       = "network-ssd"
        disk_size          = 10
      }
    }

    plugins = ["analysis-icu"]

  }

  dynamic "host" {
    for_each = toset(range(0, 6))
    content {
      name             = "datanode${host.value}"
      zone             = local.zones[(host.value) % 3]
      type             = "DATA_NODE"
      assign_public_ip = true
    }
  }

  dynamic "host" {
    for_each = toset(range(0, 3))
    content {
      name = "masternode${host.value}"
      zone = local.zones[host.value % 3]
      type = "MASTER_NODE"
    }
  }

  depends_on = [
    yandex_vpc_subnet.es-subnet-a,
    yandex_vpc_subnet.es-subnet-b,
    yandex_vpc_subnet.es-subnet-d,
  ]

}

// Auxiliary resources
resource "yandex_vpc_network" "es-net" {}

resource "yandex_vpc_subnet" "es-subnet-a" {
  zone           = "ru-central1-a"
  network_id     = yandex_vpc_network.es-net.id
  v4_cidr_blocks = ["10.1.0.0/24"]
}

resource "yandex_vpc_subnet" "es-subnet-b" {
  zone           = "ru-central1-b"
  network_id     = yandex_vpc_network.es-net.id
  v4_cidr_blocks = ["10.2.0.0/24"]
}

resource "yandex_vpc_subnet" "es-subnet-d" {
  zone           = "ru-central1-d"
  network_id     = yandex_vpc_network.es-net.id
  v4_cidr_blocks = ["10.3.0.0/24"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Block List, Min: 1, Max: 1) Configuration of the Elasticsearch cluster. (see [below for nested schema](#nestedblock--config))
- `environment` (String) Deployment environment of the Elasticsearch cluster. Can be either `PRESTABLE` or `PRODUCTION`.
- `name` (String) The resource name.
- `network_id` (String) The `VPC Network ID` of subnets which resource attached to.

### Optional

- `deletion_protection` (Boolean) The `true` value means that resource is protected from accidental deletion.
- `description` (String) The resource description.
- `folder_id` (String) The folder identifier that resource belongs to. If it is not provided, the default provider `folder-id` is used.
- `host` (Block Set) A host of the Elasticsearch cluster. (see [below for nested schema](#nestedblock--host))
- `labels` (Map of String) A set of key/value label pairs which assigned to resource.
- `maintenance_window` (Block List, Max: 1) Elasticsearch cluster maintenance window. (see [below for nested schema](#nestedblock--maintenance_window))
- `security_group_ids` (Set of String)
- `service_account_id` (String) [Service account](https://yandex.cloud/docs/iam/concepts/users/service-accounts) which linked to the resource.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `created_at` (String) The creation timestamp of the resource.
- `health` (String) Aggregated health of the cluster. Can be either `ALIVE`, `DEGRADED`, `DEAD` or `HEALTH_UNKNOWN`. For more information see `health` field of JSON representation in [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/api-ref/Cluster/).
- `id` (String) The ID of this resource.
- `status` (String) Status of the cluster. Can be either `CREATING`, `STARTING`, `RUNNING`, `UPDATING`, `STOPPING`, `STOPPED`, `ERROR` or `STATUS_UNKNOWN`. For more information see `status` field of JSON representation in [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/api-ref/Cluster/).

<a id="nestedblock--config"></a>
### Nested Schema for `config`

Required:

- `admin_password` (String, Sensitive) Password for admin user of Elasticsearch.
- `data_node` (Block List, Min: 1, Max: 1) Configuration for Elasticsearch data nodes subcluster. (see [below for nested schema](#nestedblock--config--data_node))

Optional:

- `edition` (String) Edition of Elasticsearch. For more information, see [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/concepts/es-editions).
- `master_node` (Block List, Max: 1) Configuration for Elasticsearch master nodes subcluster. (see [below for nested schema](#nestedblock--config--master_node))
- `plugins` (Set of String) A set of Elasticsearch plugins to install.
- `version` (String) Version of Elasticsearch.

<a id="nestedblock--config--data_node"></a>
### Nested Schema for `config.data_node`

Required:

- `resources` (Block List, Min: 1, Max: 1) Resources allocated to hosts of the Elasticsearch data nodes subcluster. (see [below for nested schema](#nestedblock--config--data_node--resources))

<a id="nestedblock--config--data_node--resources"></a>
### Nested Schema for `config.data_node.resources`

Required:

- `disk_size` (Number) Volume of the storage available to a host, in gigabytes.
- `disk_type_id` (String) Type of the storage of Elasticsearch hosts.
- `resource_preset_id` (String) The ID of the preset for computational resources available to a host (CPU, memory etc.). For more information, see [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/concepts).



<a id="nestedblock--config--master_node"></a>
### Nested Schema for `config.master_node`

Required:

- `resources` (Block List, Min: 1, Max: 1) Resources allocated to hosts of the Elasticsearch master nodes subcluster. (see [below for nested schema](#nestedblock--config--master_node--resources))

<a id="nestedblock--config--master_node--resources"></a>
### Nested Schema for `config.master_node.resources`

Required:

- `disk_size` (Number) Volume of the storage available to a host, in gigabytes.
- `disk_type_id` (String) Type of the storage of Elasticsearch hosts.
- `resource_preset_id` (String) The ID of the preset for computational resources available to a host (CPU, memory etc.). For more information, see [the official documentation](https://yandex.cloud/docs/managed-elasticsearch/concepts).




<a id="nestedblock--host"></a>
### Nested Schema for `host`

Required:

- `name` (String) User defined host name.
- `type` (String) The type of the host to be deployed. Can be either `DATA_NODE` or `MASTER_NODE`.
- `zone` (String) The [availability zone](https://yandex.cloud/docs/overview/concepts/geo-scope) where resource is located. If it is not provided, the default provider zone will be used.

Optional:

- `assign_public_ip` (Boolean) Sets whether the host should get a public IP address on creation. Can be either `true` or `false`.
- `subnet_id` (String) The ID of the subnet, to which the host belongs. The subnet must be a part of the network to which the cluster belongs.

Read-Only:

- `fqdn` (String) The fully qualified domain name of the host.


<a id="nestedblock--maintenance_window"></a>
### Nested Schema for `maintenance_window`

Required:

- `type` (String) Type of maintenance window. Can be either `ANYTIME` or `WEEKLY`. A day and hour of window need to be specified with weekly window.

Optional:

- `day` (String) Day of week for maintenance window if window type is weekly. Possible values: `MON`, `TUE`, `WED`, `THU`, `FRI`, `SAT`, `SUN`.
- `hour` (Number) Hour of day in UTC time zone (1-24) for maintenance window if window type is weekly.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

The resource can be imported by using their `resource ID`. For getting the resource ID you can use Yandex Cloud [Web Console](https://console.yandex.cloud) or [YC CLI](https://yandex.cloud/docs/cli/quickstart).

```shell
# terraform import yandex_mdb_elasticsearch_cluster.<resource Name> <resource Id>
terraform import yandex_mdb_elasticsearch_cluster.my_cluster ...
```
